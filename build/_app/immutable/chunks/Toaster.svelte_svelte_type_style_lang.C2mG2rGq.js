import{j as b}from"./scheduler.DQ7VZr9n.js";import{w as S}from"./index.DKtOjNG5.js";function q(...t){return t.filter(Boolean).join(" ")}const h=typeof document<"u";function w(t){const o=S(t);function p(l){h&&o.set(l)}function i(l){h&&o.update(l)}return{subscribe:o.subscribe,set:p,update:i}}let x=0;function _(){const t=w([]),o=w([]);function p(s){t.update(e=>[s,...e])}function i(s){var y;const{message:e,...n}=s,u=typeof(s==null?void 0:s.id)=="number"||s.id&&((y=s.id)==null?void 0:y.length)>0?s.id:x++,f=s.dismissable===void 0?!0:s.dismissable,r=s.type===void 0?"default":s.type;return b(t).find(m=>m.id===u)?t.update(m=>m.map(g=>g.id===u?{...g,...s,id:u,title:e,dismissable:f,type:r,updated:!0}:{...g,updated:!1})):p({...n,id:u,title:e,dismissable:f,type:r}),u}function l(s){if(s===void 0){t.set([]);return}return t.update(e=>e.filter(n=>n.id!==s)),s}function I(s,e){return i({...e,type:"default",message:s})}function T(s,e){return i({...e,type:"error",message:s})}function a(s,e){return i({...e,type:"success",message:s})}function j(s,e){return i({...e,type:"info",message:s})}function E(s,e){return i({...e,type:"warning",message:s})}function H(s,e){return i({...e,type:"loading",message:s})}function $(s,e){if(!e)return;let n;e.loading!==void 0&&(n=i({...e,promise:s,type:"loading",message:e.loading}));const u=s instanceof Promise?s:s();let f=n!==void 0;return u.then(r=>{if(r&&typeof r.ok=="boolean"&&!r.ok){f=!1;const d=typeof e.error=="function"?e.error(`HTTP error! status: ${r.status}`):e.error;i({id:n,type:"error",message:d})}else if(e.success!==void 0){f=!1;const d=typeof e.success=="function"?e.success(r):e.success;i({id:n,type:"success",message:d})}}).catch(r=>{if(e.error!==void 0){f=!1;const d=typeof e.error=="function"?e.error(r):e.error;i({id:n,type:"error",message:d})}}).finally(()=>{var r;f&&(l(n),n=void 0),(r=e.finally)==null||r.call(e)}),n}function k(s,e){const n=(e==null?void 0:e.id)||x++;return i({component:s,id:n,...e}),n}function v(s){o.update(e=>e.filter(n=>n.toastId!==s))}function B(s){if(b(o).find(n=>n.toastId===s.toastId)===void 0){o.update(n=>[s,...n]);return}o.update(n=>n.map(u=>u.toastId===s.toastId?s:u))}function P(){t.set([]),o.set([])}return{create:i,addToast:p,dismiss:l,message:I,error:T,success:a,info:j,warning:E,loading:H,promise:$,custom:k,removeHeight:v,setHeight:B,reset:P,toasts:t,heights:o}}const c=_();function C(t,o){return c.create({message:t,...o})}const D=C,z=Object.assign(D,{success:c.success,info:c.info,warning:c.warning,error:c.error,custom:c.custom,message:c.message,promise:c.promise,dismiss:c.dismiss,loading:c.loading}),A=t=>({subscribe:t});export{c as a,q as c,z as t,A as u};
